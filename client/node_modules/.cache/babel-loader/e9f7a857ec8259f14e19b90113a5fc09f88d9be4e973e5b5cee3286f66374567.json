{"ast":null,"code":"// App.js\nimport React,{useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[file,setFile]=useState(null);const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const[downloadLink,setDownloadLink]=useState('');const handleFileChange=e=>{setFile(e.target.files[0]);};const handleUpload=async()=>{setLoading(true);const formData=new FormData();formData.append('file',file);try{const response=await axios.post('http://localhost:8080/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});setMessage(response.data.message);setDownloadLink(response.data.downloadLink);console.log('Download link:',response.data.downloadLink);}catch(error){console.error('Error uploading file:',error);}finally{setLoading(false);}};const handleDownload=async()=>{setLoading(true);//const formData = new FormData();\n//formData.append('file', file);\ntry{const fileReader=new FileReader();const response=await axios.get('http://localhost:8080/download',{responseType:\"blob\"}).then(res=>{console.log(res);fileReader.readAsDataURL(new Blob([res.data]));}).catch(err=>console.log(err));fileReader.addEventListener(\"loadend\",()=>{const blobString=fileReader.result;const link=document.createElement(\"a\");link.href=blobString;link.setAttribute(\"download\",\"report-\".concat(new Date(),\".csv\"));document.body.appendChild(link);link.click();});}catch(error){}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"CSV Upload and Processing\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,children:\"Download Report\"}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),message&&/*#__PURE__*/_jsx(\"div\",{children:message}),downloadLink&&/*#__PURE__*/_jsx(\"a\",{href:downloadLink,children:\"Download Report\"})]});}export default App;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","App","file","setFile","loading","setLoading","message","setMessage","downloadLink","setDownloadLink","handleFileChange","e","target","files","handleUpload","formData","FormData","append","response","post","headers","data","console","log","error","handleDownload","fileReader","FileReader","get","responseType","then","res","readAsDataURL","Blob","catch","err","addEventListener","blobString","result","link","document","createElement","href","setAttribute","concat","Date","body","appendChild","click","children","type","onChange","onClick"],"sources":["/Users/viktoriianeimesh/Documents/Projects/invoice_data/client/src/App.js"],"sourcesContent":["// App.js\nimport React, { useState } from 'react';\nimport axios from 'axios';\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [downloadLink, setDownloadLink] = useState('');\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleUpload = async () => {\n    setLoading(true);\n    const formData = new FormData();\n    formData.append('file', file);\n  \n    try {\n      const response = await axios.post('http://localhost:8080/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      setMessage(response.data.message);\n      setDownloadLink(response.data.downloadLink);\n      console.log('Download link:', response.data.downloadLink);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownload = async () => {\n    setLoading(true);\n    //const formData = new FormData();\n    //formData.append('file', file);\n\n    try {\n      const fileReader = new FileReader();\n      const response = await axios.get('http://localhost:8080/download', {\n        responseType: \"blob\",\n      }).then((res) => {\n        console.log(res);\n        fileReader.readAsDataURL(new Blob([res.data]));\n      })\n          .catch((err) => console.log(err));\n\n      fileReader.addEventListener(\"loadend\", () => {\n        const blobString = fileReader.result;\n        const link = document.createElement(\"a\");\n        link.href = blobString;\n        link.setAttribute(\"download\", `report-${new Date()}.csv`);\n        document.body.appendChild(link);\n        link.click();\n      });\n\n\n    } catch (error) {\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <h1>CSV Upload and Processing</h1>\n      <input type=\"file\" onChange={handleFileChange} />\n      <button onClick={handleUpload}>Upload</button>\n      <button onClick={handleDownload}>Download Report</button>\n      {loading && <div>Loading...</div>}\n      {message && <div>{message}</div>}\n      {downloadLink && <a href={downloadLink}>Download Report</a>}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}